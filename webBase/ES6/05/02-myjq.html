<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="./myjq.js"></script>
</head>
<body>
  <div class="box">click me</div>
  <!-- <div class="box">click me2</div> -->
  <button>btn</button>
</body>
<script>
// $('.box').click(function(){
//   console.log('click event')
// })

// $(document.querySelector('.box')).click(function(){
//   console.log('click')
// })

// $(function(){
//   console.log('load')
// })


// let res=$('.box');
// console.log(res)

// $('.box').click(()=>{
// console.log('click')
// })

// $('.box').on('mouseover mousedown',()=>{
//   console.log('click')
// })

// $('.box').on('mouseover',()=>{
//   console.log('mouseover')
// }).on('mousedown',()=>{
//   console.log('mousedown')
// })

// $('.box').on('click',()=>{
//   console.log('click')
// }).eq(0).on('click',()=>{
//   console.log('click 0')
// })

// let res = $('.box').eq(0);
// console.log(res)
// $('.box').eq(0).on('click',function(){
//   console.log(1111)

// })

// console.log($('div').get(0))

// $('div').eq(0).eq(0).end().end().on('click',function(){
//   console.log(1223)
// })


// $('div').css({
//   width:'100px',
//   height:'100px',
//   background:'red',
// })

// $('div').css('background','blue')

// console.log($('div').css('background'))

// $.cssHooks.wh={
//   get(ele){
//     console.log('get',ele);
//     return getComputedStyle(ele,null)['width'] +'-'+getComputedStyle(ele,null)['height']
//   },
//   set(ele,styleValue){
//     console.log('set',ele,styleValue);
//     ele.style['width']=styleValue;
//     ele.style['height']=styleValue;
//   }
// }

// let res=$('div').css('wh')
// console.log(res)

// $('div').css('wh','300px')


// 实现一个animate 方法

$('button').on('click',function(){
  $('.box').animate({width:'600px'},2000,function(){
    console.log('ok');
  })
})



const Deferred=function(){
 
  let state='pending';
  let deferred={
    state(){
      return state;
    },
    then(doneCb,failCb){
      this.done(doneCb).fail(failCb)
    }
  };
  let tuples=[
    ['resolve','done',$.Callbacks('once'),'resolved'],
    ['reject','fail',$.Callbacks('once'),'rejected']
  ];

  tuples.forEach((tuple,i)=>{
    let list=tuple[2];
    stateString=tuple[3];
    deferred[tuple[1]]=list.add;
    if(stateString){
      list.add(function(){
        status=stateString;
      })
    }
    deferred[tuple[0]]=function(res){
      deferred[tuple[0] + 'With'](this,arguments)
    }
    deferred[tuple[0] + 'With']=list.fireWith;
  })


  return deferred;
}










</script>
</html>
